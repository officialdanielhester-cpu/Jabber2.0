<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jabber</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <header>
      <h1>Jabber</h1>
      <div class="theme-toggle">
        <button id="themeButton">üåô Dark Mode</button>
      </div>
    </header>

    <main>
      <div id="chatBox" class="chat-box"></div>

      <div class="input-area">
        <input id="userInput" type="text" placeholder="Type your message..." />
        <button id="sendButton">Send</button>
        <button id="browseButton">üåê Browse Web</button>
      </div>
    </main>
  </div>

  <script>
    // Theme toggle
    const themeButton = document.getElementById("themeButton");
    themeButton.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      if (document.body.classList.contains("dark-mode")) {
        themeButton.textContent = "‚òÄÔ∏è Light Mode";
      } else {
        themeButton.textContent = "üåô Dark Mode";
      }
    });

    // Chat logic
    const sendButton = document.getElementById("sendButton");
    const userInput = document.getElementById("userInput");
    const chatBox = document.getElementById("chatBox");

    sendButton.addEventListener("click", async () => {
      const message = userInput.value.trim();
      if (!message) return;

      chatBox.innerHTML += `<div class="user-msg"><b>You:</b> ${message}</div>`;
      userInput.value = "";

      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message })
        });
        const data = await res.json();
        chatBox.innerHTML += `<div class="bot-msg"><b>Jabber:</b> ${data.reply}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;
      } catch (err) {
        chatBox.innerHTML += `<div class="error-msg">‚ö†Ô∏è Error contacting server</div>`;
      }
    });

    // Web browsing button
    const browseButton = document.getElementById("browseButton");
    browseButton.addEventListener("click", () => {
      window.open("https://www.google.com", "_blank");
    });
  </script>
</body>
</html>